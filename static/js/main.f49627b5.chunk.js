(this["webpackJsonpray-shooting"]=this["webpackJsonpray-shooting"]||[]).push([[0],{14:function(t,e,n){},15:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var r=n(1),i=n.n(r),l=n(7),h=n.n(l),u=(n(14),n(6)),s=n(3),c={NONE:0,CREATING_LINE_SEGMENT:1,SHOOTING_RAY:2},o=(n(15),n(8)),a=n(9);function f(t){return null===t?0:t.height}function g(t){return null===t?0:f(t.right)-f(t.left)}function p(t){this.element=t,this.height=1,this.left=null,this.right=null,this.id=Math.random()}function d(t,e){return t<e?-1:t>e?1:0}function _(t){t.height=Math.max(f(t.left),f(t.right))+1}function m(t){var e=new p(t.element);return e.left=t.left,e.right=t.right,e.height=t.height,e.og=t,e}function v(t){if(null===t)return null;var e=m(t);return e.left=v(t.left),e.right=v(t.right),e}var y=function(){function t(e){Object(o.a)(this,t),this._compare="function"===typeof e?e:d,this.current=null,this.versions=[]}return Object(a.a)(t,[{key:"step",value:function(){this.versions.push(this.current)}},{key:"getVersion",value:function(t){return t<this.versions.length?this.versions[t]:null}},{key:"getSuccessor",value:function(t,e){var n=this._search(t,e),r=n.node,i=n.path;if(null===r)return null;if(r.right)return this.getMin(r.right);for(var l=i.length-2;l>=0;l--)if(i[l].left===i[l+1])return i[l];return null}},{key:"shootVerticalRay",value:function(t,e){var n=this.getVersion(t);if(null===n)return null;var r=this._insert(e,n),i=this.getSuccessor(e,r);return null===i||i}}]),t}();y.prototype.search=function(t){var e=this._search(t,this.current).node;return e?e.element:null},y.prototype._search=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(null===e)return{node:e,path:n};n.push(e);var r=this._compare(t,e.element);return r<0?this._search(t,e.left,n):r>0?this._search(t,e.right,n):{node:e,path:n}},y.prototype.insert=function(t){this.current=this._insert(t,this.current)},y.prototype._insert=function(t,e){if(null===e)return new p(t);e=m(e);var n=this._compare(t,e.element);n<0?e.left=this._insert(t,e.left):n>0&&(e.right=this._insert(t,e.right)),e.height=Math.max(f(e.left),f(e.right))+1;var r=g(e);if(r<-1){var i=this._compare(t,e.left.element);if(i<0)return v(this._rightRotate(e));if(i>0)return e.left=this._leftRotate(e.left),v(this._rightRotate(e))}else if(r>1){var l=this._compare(t,e.right.element);if(l>0)return v(this._leftRotate(e));if(l<0)return e.right=this._rightRotate(e.right),v(this._leftRotate(e))}return e},y.prototype._rightRotate=function(t){var e=t.left,n=e.right;return e.right=t,t.left=n,t.height=Math.max(f(t.left),f(t.right))+1,e.height=Math.max(f(e.left),f(e.right))+1,e},y.prototype._leftRotate=function(t){var e=t.right,n=e.left;return e.left=t,t.right=n,t.height=Math.max(f(t.left),f(t.right))+1,e.height=Math.max(f(e.left),f(e.right))+1,e},y.prototype.delete=function(t){null!==this.current&&(this.current=this._delete(t,this.current,null))},y.prototype._delete=function(t,e,n){if(null===e)return null;var r=e;e=m(e);var i=this._compare(t,e.element);if(i<0)0===this._compare(t,e.left.element)?this._delete(t,e.left,e):e.left=this._delete(t,e.left,e);else if(i>0)this._compare(t,e.right.element),this._delete(t,e.right,e);else if(null!==e.left&&null!==e.right){var l=this._deleteMax(e.left,e);e.element=l.element}else if(null===e.left)if(null===e.right){if(null===n)return null;n.right===r?n.right=null:n.left=null}else{if(null===n)return e.right;n.right===r?n.right=e.right:n.left=e.right,e.right=null}else{if(null===n)return e.left;n.right===r?n.right=e.left:n.left=e.left,e.left=null}return this._balance(e,n)},y.prototype.deleteMax=function(){return this._deleteMax(this.current,null).element},y.prototype._deleteMax=function(t,e){var n;return null===t.right?(n=this._delete(t.element,t,e),this._balance(t,e),n):(n=this._deleteMax(t.right,t),this._balance(t,e),n)},y.prototype.getMin=function(t){return null===t.left?t:this.getMin(t.left)},y.prototype.getMax=function(t){return null===t.right?t:this.getMax(t.right)},y.prototype._balance=function(t,e){_(t);var n,r,i,l,h=g(t);return h<-1?(l=t=v(t),i=t.left,r=this._getTallestSubtree(i),n=this._triNodeRestructure(r,i,l,e),_(l),_(r),_(i),_(l),_(r),_(i),n):h>1?(l=t=v(t),i=t.right,r=this._getTallestSubtree(i),n=this._triNodeRestructure(r,i,l,e),_(l),_(r),_(i),_(l),_(r),_(i),n):(_(t),t)},y.prototype._getTallestSubtree=function(t){return g(t)<0?t.left:t.right},y.prototype._triNodeRestructure=function(t,e,n,r){var i,l,h;return n.right===e&&e.left===t&&(i=n,l=t,h=e),n.right===e&&e.right===t&&(i=n,l=e,h=t),n.left===e&&e.left===t&&(i=t,l=e,h=n),n.left===e&&e.right===t&&(i=e,l=t,h=n),n.og===this.current||n===this.current||n.element===this.current.element?this.current=l:r.left===n?r.left=l:r.right=l,l.left!==t&&l.left!==e&&l.left!==n&&(i.right=l.left),l.right!==t&&l.right!==e&&l.right!==n&&(h.left=l.right),l.left=i,l.right=h,l},y.prototype.forEach=function(t){this._forEach(this.current,t)},y.prototype._forEach=function(t,e){null!==t&&(this._forEach(t.left,e),e(t.element),this._forEach(t.right,e))},y.prototype.getElementsAtDepth=function(t){var e=[];return this._getElementsAtDepth(t,0,this.current,e),e},y.prototype._getElementsAtDepth=function(t,e,n,r){null!==n&&(t!==e?(this._getElementsAtDepth(t,e+1,n.left,r),this._getElementsAtDepth(t,e+1,n.right,r)):r.push(n.element))};var b=n.p+"static/media/plus.18e46bbf.svg",x=n.p+"static/media/ray.86b55e34.svg",j=n(0),O=function(){var t=Object(r.useState)(c.CREATING_LINE_SEGMENT),e=Object(s.a)(t,2),n=e[0],i=e[1],l=Object(r.useState)(null),h=Object(s.a)(l,2),o=h[0],a=h[1],f=Object(r.useState)([]),g=Object(s.a)(f,2),p=g[0],d=g[1],_=Object(r.useState)(new y),m=Object(s.a)(_,2),v=m[0],O=m[1],E=Object(r.useRef)(null),N=Object(r.useCallback)((function(){if(0!==p.length){var t=new y,e=Object(u.a)(p);e.sort((function(t,e){return t.x1<e.x1?-1:t.x1>e.x1?1:0}));var n=Object(u.a)(p);n.sort((function(t,e){return t.x2<e.x2?-1:t.x2>e.x2?1:0}));for(var r=0,i=0,l=0;l<window.innerWidth;l+=1)r<p.length&&e[r].x1<=l&&(t.insert(window.innerHeight-e[r].y1),r++),i<p.length&&n[i].x2<=l&&(t.delete(window.innerHeight-n[i].y1),i++),t.step();return t}}),[p]),w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.createElementNS("http://www.w3.org/2000/svg","line");return n.setAttribute("x1",t.x1),n.setAttribute("y1",t.y1),n.setAttribute("x2",t.x2),n.setAttribute("y2",t.y2),null!==e&&n.setAttribute("id",e),n},M=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=document.createElementNS("http://www.w3.org/2000/svg","circle");return r.setAttribute("cx",t),r.setAttribute("cy",e),r.setAttribute("r",n),r};return Object(j.jsxs)("div",{className:"App",onClick:function(t){if("svg"===t.target.tagName.toLowerCase())if(n===c.CREATING_LINE_SEGMENT)if(null===o)a({x:t.clientX,y:t.clientY}),E.current.appendChild(M(t.clientX,t.clientY));else{a(null);var e=t.clientX<o.x,r={x1:e?t.clientX:o.x,y1:e?t.clientY:o.y,x2:e?o.x:t.clientX,y2:e?o.y:t.clientY};d(p.concat(r)),E.current.appendChild(w(r)),E.current.appendChild(M(r.x2,r.y2))}else n===c.SHOOTING_RAY&&console.log(v.shootVerticalRay(t.clientX,window.innerHeight-t.clientY))},children:[Object(j.jsx)("div",{className:"vertical-lines"}),Object(j.jsx)("div",{className:"horizontal-lines"}),Object(j.jsxs)("div",{className:"button-bar",children:[Object(j.jsxs)("button",{className:n===c.CREATING_LINE_SEGMENT?"selected":"",onClick:function(){return i(c.CREATING_LINE_SEGMENT)},children:[Object(j.jsx)("img",{src:b,alt:"Create line segment"}),Object(j.jsx)("p",{children:"Create line segment"})]}),Object(j.jsxs)("button",{className:n===c.SHOOTING_RAY?"selected":"",onClick:function(){0!==p.length&&(O(N()),i(c.SHOOTING_RAY))},children:[Object(j.jsx)("img",{src:x,alt:"Shoot vertical ray"}),Object(j.jsx)("p",{children:"Shoot vertical ray"})]})]}),Object(j.jsx)("svg",{ref:E,width:window.innerWidth,height:window.innerHeight,onMouseMove:function(t){if(n===c.SHOOTING_RAY){null!==document.getElementById("ray")&&document.getElementById("ray").remove();var e=v.shootVerticalRay(t.clientX,window.innerHeight-t.clientY);if(null!==e){var r=p.find((function(t){return window.innerHeight-t.y1===e.element}));if(void 0!==r){var i=r.y1+(r.y2-r.y1)/(r.x2-r.x1)*(t.clientX-r.x1);E.current.appendChild(w({x1:t.clientX,y1:t.clientY,x2:t.clientX,y2:i},"ray"))}}}}})]})},E=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,l=e.getLCP,h=e.getTTFB;n(t),r(t),i(t),l(t),h(t)}))};h.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(O,{})}),document.getElementById("root")),E()}},[[17,1,2]]]);
//# sourceMappingURL=main.f49627b5.chunk.js.map